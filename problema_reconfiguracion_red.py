# -*- coding: utf-8 -*-
"""
Created on Sun Mar 23 09:05:12 2025

@author: 000010478
"""

import numpy as np
import matplotlib.pyplot as plt
import networkx as nx
plt.close('all')
#Puntos de subestaciones: 
se=[(-7500.0, -7500.0), (-7500.0, 7500.0), (7500.0, -7500.0), (7500.0, 7500.0)]
N=200
L=10000
xu=np.random.uniform(low=-L, high=L, size=N)
yu=np.random.uniform(low=-L, high=L, size=N)

circuitos=[[(-7474.564341469684, 7636.9012939661625),  (-7355.651828654365, 5674.844832513409),  (-7474.564341469684, 4247.89467872959),  (-7474.564341469684, 2761.488268538109),  (-7593.4768542850015, 1215.625601938973),  (-7593.4768542850015, -92.4120390295302),  (-7534.020597877343, -1222.0809107750538),  (-7534.020597877343, -2411.206038928236),  (-7593.4768542850015, -3778.699936304398),  (-7534.020597877343, -5324.562602903536),  (-7534.020597877343, -6097.493936203105),  (-7474.564341469684, -7286.619064356288)],
 [(-7474.564341469684, 7517.9887811508415),  (-5750.332905647569, 7517.9887811508415),  (-4085.5577262331117, 7577.445037558504),  (-2777.520085264612, 7517.9887811508415),  (-1707.3074699267454, 7458.532524743183),  (-458.7260853659027, 7517.9887811508415),  (849.3115556025987, 7517.9887811508415),  (2216.8054529787587, 7577.445037558504),  (3822.124375985557, 7517.9887811508415),  (5130.162016954058, 7696.357550373821),  (6319.287145107239, 7696.357550373821),  (7508.412273260423, 7696.357550373821)],
 [(-7457.3574017789, -7358.278096030874),  (-6149.8501477654845, -7417.710243940574),  (-4664.046450022966, -7417.710243940574),  (-3594.267787648354, -7417.710243940574),  (-2286.760533634937, -7417.710243940574),  (-741.5246879827209, -7417.710243940574),  (684.8468618500956, -7417.710243940574),  (1754.6255242247098, -7417.710243940574),  (2467.811299141118, -7417.710243940574),  (3656.454257335132, -7298.845948121173),  (4726.232919709746, -7298.845948121173),  (5558.282990445554, -7358.278096030874),  (6568.6295049104665, -7358.278096030874),  (7460.111723555976, -7358.278096030874)],
 [(7460.111723555976, -7298.845948121173),  (7519.5438714656775, -6347.931581565962),  (7519.5438714656775, -5456.449362920452),  (7578.976019375379, -4446.102848455539),  (7578.976019375379, -3554.6206298100296),  (7638.408167285081, -2603.706263254817),  (7697.840315194779, -1415.063305060803),  (7638.408167285081, -226.42034686678926),  (7638.408167285081, 1021.6547592369243),  (7638.408167285081, 2091.4334216115385),  (7460.111723555976, 3280.0763798055523),  (7757.27246310448, 4409.287190089864),  (7578.976019375379, 5657.36229619358),  (7638.408167285081, 6727.140958568194),  (7638.408167285081, 7678.055325123405)],
 [(-7590.68568831505, 1334.439907574084),  (-6425.8469625088, 1244.8369286659108),  (-5350.611215610723, 1274.7045883019691),  (-4574.0520650732215, 1304.5722479380274),  (-3797.49291453572, 1334.439907574084),  (-2722.257167637643, 1364.3075672101422),  (-2035.3009960083182, 1364.3075672101422),  (-1079.5358876544706, 1274.7045883019691),  (-243.24141784485255, 1304.5722479380274),  (593.0530519647618, 1424.042886482257),  (1190.406244685917, 1394.1752268462005),  (1250.14156395803, 2409.675654472161),  (1130.6709254138004, 3305.705443553892),  (1011.2002868695708, 4201.735232635623),  (981.3326272335107, 5276.9709795337)],
 [(-3795.05940131024, -7174.74194875469),  (-3735.589618097347, -5985.346284496825),  (-3676.119834884452, -4498.601704174494),  (-3676.119834884452, -3130.79669027795),  (-3676.119834884452, -1881.9312428071917),  (-2486.7241706265886, -1584.582326742724),  (-940.5098070913627, -1584.582326742724),  (427.2952068051818, -1644.0521099556172),  (1735.6304374888314, -1703.5218931685104),  (2925.0261017466983, -1703.5218931685104),  (4292.831115643243, -1703.5218931685104),  (4173.8915492174565, -157.30752963328632),  (3936.012416365884, 1329.4370506890446),  (3995.482199578775, 2340.423365308232)],
 [(7364.710083283961, -4357.483914167748),  (6301.674508509343, -4298.426382235824),  (5061.466337938953, -4298.426382235824),  (3998.4307631643314, -4357.483914167748),  (2758.222592593942, -4357.483914167748),  (1636.129485887399, -4357.483914167748),  (514.0363791808559, -4357.483914167748),  (-844.28685525338, -4062.1962545081315),  (-1789.2073661641516, -3885.023658712362),  (-1966.379961959923, -5361.461957010444)],
 [(7731.489429518944, 4669.681006048731),  (8559.138106099497, 5142.6231069519035),  (9091.197969615569, 6029.389546145356),  (9564.140070518744, 7034.391510564603),  (9623.25783313164, 8571.453338499918),  (9386.786782680054, 9753.808590757855),  (8263.549293035016, 9753.808590757855),  (7849.724954744739, 9694.690828144956),  (7081.194040777078, 9753.808590757855),  (6312.663126809421, 9812.92635337075)], [(-7610.30632842269, 7824.114179679509),  (-8973.399287108967, 7824.114179679509),  (-9743.84313332295, 8950.147493376866),  (-8795.604553367279, 9839.121162085306),  (-7254.716860939314, 9839.121162085306),  (-5891.623902253037, 9542.796605849162),  (-4172.941476083384, 9957.650984579766),  (-3343.232718622172, 10016.915895826995),  (-2157.934493677585, 9957.650984579766),  (-1150.4310024746846, 9839.121162085306),  (-142.92751127178417, 9957.650984579766),  (746.0461574366564, 10016.915895826995),  (1872.0794711340168, 9957.650984579766),  (2998.1127848313736, 10016.915895826995),  (3768.556631045358, 10016.915895826995),  (4716.7952110010265, 10016.915895826995),  (5961.358347192847, 10076.180807074226)],
 [(7489.312832257332, 7737.857500330501),  (6826.343404480256, 7074.888072553429),  (6374.318794632258, 6442.053618766222),  (5922.294184784252, 6110.568904877688),  (5229.189783017311, 6050.298956897954),  (4596.355329230108, 6080.433930887819),  (3933.3859014530317, 6050.298956897954),  (3270.416473675963, 6050.298956897954),  (2547.1770979191533, 5929.759060938486),  (2426.6372019596856, 5327.059581141144),  (2306.097306000218, 4483.28030942487),  (2547.1770979191533, 4061.3906735667333),  (3330.6864216556933, 3970.9857515971344),  (4114.195745392237, 3970.9857515971344),  (5018.244965088241, 3970.9857515971344),  (5982.564132763982, 4001.1207255869995),  (6404.453768622123, 4814.765023313408)],
 [(-7671.144665567435, -3536.1019254276744),  (-8623.885364255233, -3655.194512763648),  (-9636.172356611018, -3655.194512763648),  (-9814.81123761498, -4369.750036779496),  (-9755.264943946993, -5739.314791143204),  (-9755.264943946993, -6930.240664502951),  (-9933.903824950954, -7942.527656858736),  (-9695.718650279005, -8597.536887206596),  (-8981.163126263158, -9014.360942882508),  (-7492.505784563475, -9371.638704890433),  (-6122.941030199765, -9431.18499855842),  (-4872.468863172031, -9490.731292226406),  (-3621.996696144297, -9550.277585894393),  (-2371.524529116563, -9550.277585894393),  (-1478.3301240967521, -9490.731292226406),  (-466.0431317409675, -9431.18499855842),  (665.3364479507909, -9609.82387956238),  (1796.7160276425493, -9669.370173230367),  (2630.364138994373, -9550.277585894393),  (3583.1048376821673, -9312.092411222444)],
 [(-4577.269973119664, 1584.0825950964208),  (-4577.269973119664, 2656.0164507457957),  (-4636.821853989075, 3787.5021872645775),  (-4636.821853989075, 5038.091685522177),  (-3505.336117470293, 5395.402970738636),  (-1956.9872148656432, 5097.643566391587),  (-765.9495974774509, 5276.299208999815)],
 [(7391.164588360451, -7201.692303315431),  (8342.458359063254, -6904.412999970805),  (9115.38454775928, -6428.766114619403),  (9472.119711772833, -5358.560622578751),(9650.48729377961, -4347.810991207021),  (9650.48729377961, -3337.061359835294),  (9650.48729377961, -2147.94414645679),  (9472.119711772833, -839.9152117404356),  (9531.575572441758, 349.2020016380684),  (9531.575572441758, 1538.3192150165723),  (9531.575572441758, 2549.0688463883),(9472.119711772833, 3381.4508957532544),  (9293.752129766057, 4748.935691138531),  (8461.370080401106, 5402.950158496709)]]

gates=[(-6549.448636396541, 7518.591864235104),
 (-7565.574206994355, 2049.4454107233396),
 (-7565.574206994355, -2971.410349877624),
 (-6698.878867366806, -7304.887048015362),
 (6869.386104733421, 7668.022095205373),
 (7945.283767719338, -7125.570770851042),
 (7526.879121002596, -6856.596355104562),
 (6491.961235174633, -7255.60064942705),
  (7630.291655521069, 6853.705350130102),
  (-7317.784127449246, 5745.330993476993),
  (7398.96172505385, 3363.1080188490014),
   (9243.976543688594, 4821.264891640974),
   (9095.185026056759, 6071.113639748382),
   (7577.511546212052, 5714.013997431979),
   (-4687.340991264598, -7413.43445518852),
    (-2255.5970416400633, -7353.391394703963),
    (-7539.386364281028, -5251.884277744488),
    (7533.405569737613, -5343.626907382655),
     (7503.55579894075, -3463.0913471805397),
     (-7660.127765863614, -0.5179347448975022),
     (-9011.657268225717, 7902.370779967534)]

puntos=[np.array(si) for si in se] #Se agregan los puntos de las subestaciones
se=[0,1,2,3] #Se cambian las subestaciones por los índices de las mismas
circuitos2=[]
for circ in circuitos: #Se va a tomar cada circuito declarado
    tmp=[]
    for pi in circ: #Cada uno de los puntos. Se mirará si existe o se agrega nuevo
        pi=np.array(pi)
        dist=[np.linalg.norm(pi-p) for p in puntos]
        if(np.min(dist)<500): #El punto existe
            tmp.append(int(np.argmin(dist)))
        else: 
            tmp.append(len(puntos))
            puntos.append(pi)
    circuitos2.append(tmp)

gates2=[]
for gi in gates: 
    gi=np.array(gi)
    dist=[np.linalg.norm(gi-p) for p in puntos]
    gates2.append(int(np.argmin(dist)))

def dibujarRed(se, xu, yu, circuitos, puntos, gates):
    plt.plot(xu,yu,'.b')
    for si in se:
        plt.plot(puntos[si][0], puntos[si][1],'sb', markersize=20)
    for i,gi in enumerate(gates):
        plt.plot(puntos[gi][0], puntos[gi][1],'xr', markersize=10)
        plt.text(puntos[gi][0], puntos[gi][1],str(i), fontsize=10)
    for ci in circuitos: 
        x=[puntos[ri][0] for ri in ci]
        y=[puntos[ri][1] for ri in ci]
        plt.plot(x,y,'-k.')
    plt.axis('equal')
    
dibujarRed(se, xu,yu, circuitos2, puntos, gates2)
#circuitos.append(plt.ginput(-1))